[{"filePath":"D:\\code\\witweb\\web\\src\\app\\admin\\ai\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\admin\\blogs\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\admin\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\admin\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\admin\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\admin\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\admin\\users\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\ai\\apikeys\\[key]\\credits\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\ai\\apikeys\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\ai\\config\\base-url\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\ai\\config\\sora2-key\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\ai\\config\\token\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\ai\\credits\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\ai\\models\\[model]\\status\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\blogs\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\blogs\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\stats\\overview\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\users\\[username]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\admin\\users\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\blog\\[slug]\\comments\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\blog\\[slug]\\dislike\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\blog\\[slug]\\favorite\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\blog\\[slug]\\like\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\blog\\[slug]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\blog\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\channels\\[id]\\messages\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\channels\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\channels\\messages\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\channels\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\comment\\[id]\\dislike\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\comment\\[id]\\like\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\favorites\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\follow\\[username]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\follow\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\following\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\health\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\login\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\profile\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\register\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\upload-image\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\upload\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\users\\[username]\\profile\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\video\\characters\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\video\\create-character\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\video\\generate\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\video\\tasks\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\video\\tasks\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\api\\video\\upload-character\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\character\\create\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\character\\create\\start\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\character\\upload\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\character\\upload\\start\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\config\\api-key\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\config\\host-mode\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\config\\query-defaults\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\config\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\config\\token\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\credits\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\downloads\\[...path]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\favorites\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\following\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadItems'. Either include it or remove the dependency array.","line":22,"column":6,"nodeType":"ArrayExpression","endLine":22,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [loadItems, token]","fix":{"range":[605,612],"text":"[loadItems, token]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadItems'. Either include it or remove the dependency array.","line":29,"column":6,"nodeType":"ArrayExpression","endLine":29,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [loadItems, token]","fix":{"range":[898,905],"text":"[loadItems, token]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport RequireAuth from \"@/components/RequireAuth\";\r\nimport { useAuth } from \"../providers\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function FollowingPage() {\r\n  const { token } = useAuth();\r\n  const [items, setItems] = useState<any[]>([]);\r\n\r\n  const loadItems = () => {\r\n    fetch(`/api/following?page=1&size=20`, {\r\n      headers: token ? { Authorization: `Bearer ${token}` } : {},\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => setItems(data.items || []));\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadItems();\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n    const handler = () => loadItems();\r\n    window.addEventListener(\"profile-updated\", handler as EventListener);\r\n    return () => window.removeEventListener(\"profile-updated\", handler as EventListener);\r\n  }, [token]);\r\n\r\n  return (\r\n    <RequireAuth>\r\n      <div className=\"space-y-4\">\r\n        <h1 className=\"text-xl font-semibold\">\\u6211\\u7684\\u5173\\u6ce8</h1>\r\n        {items.map((user) => (\r\n          <Link key={user.username} href={`/user/${user.username}`} className=\"card p-4 block\">\r\n            <div className=\"font-semibold\">{user.nickname || user.username}</div>\r\n            <div className=\"text-xs text-zinc-500\">\\u5173\\u6ce8 {user.following_count} \\u00b7 \\u7c89\\u4e1d {user.follower_count}</div>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </RequireAuth>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\forum\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\generate\\finalize\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\generate\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\generate\\start\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\history\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\model-status\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\openapi\\api-key-credits\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\openapi\\create-api-key\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\openapi\\credits\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\post\\[slug]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\profile\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\providers.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\code\\witweb\\web\\src\\app\\providers.tsx:44:7\n  42 |     const storedProfile = localStorage.getItem(\"profile\");\n  43 |     if (storedToken) {\n> 44 |       setToken(storedToken);\n     |       ^^^^^^^^ Avoid calling setState() directly within an effect\n  45 |       if (storedProfile) {\n  46 |         try {\n  47 |           setUser(JSON.parse(storedProfile));","line":44,"column":7,"nodeType":null,"endLine":44,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { createContext, useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\nexport type UserProfile = {\r\n  username: string;\r\n  nickname?: string;\r\n  avatar_url?: string;\r\n  cover_url?: string;\r\n  bio?: string;\r\n  created_at?: string;\r\n  following_count?: number;\r\n  follower_count?: number;\r\n  balance?: number;\r\n};\r\n\r\ntype AuthContextValue = {\r\n  user: UserProfile | null;\r\n  token: string | null;\r\n  login: (token: string, profile: UserProfile) => void;\r\n  logout: () => void;\r\n  updateProfile: (profile: UserProfile) => void;\r\n  loading: boolean;\r\n  isAuthenticated: boolean;\r\n};\r\n\r\nconst AuthContext = createContext<AuthContextValue | null>(null);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<UserProfile | null>(null);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const notifyProfileUpdate = () => {\r\n    if (typeof window !== \"undefined\") {\r\n      window.dispatchEvent(new Event(\"profile-updated\"));\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem(\"token\");\r\n    const storedProfile = localStorage.getItem(\"profile\");\r\n    if (storedToken) {\r\n      setToken(storedToken);\r\n      if (storedProfile) {\r\n        try {\r\n          setUser(JSON.parse(storedProfile));\r\n        } catch {}\r\n      }\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const value = useMemo<AuthContextValue>(\r\n    () => ({\r\n      user,\r\n      token,\r\n      loading,\r\n      isAuthenticated: !!token,\r\n      login: (newToken, profile) => {\r\n        localStorage.setItem(\"token\", newToken);\r\n        localStorage.setItem(\"profile\", JSON.stringify(profile));\r\n        setToken(newToken);\r\n        setUser(profile);\r\n        notifyProfileUpdate();\r\n      },\r\n      logout: () => {\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"profile\");\r\n        setToken(null);\r\n        setUser(null);\r\n        notifyProfileUpdate();\r\n      },\r\n      updateProfile: (profile) => {\r\n        localStorage.setItem(\"profile\", JSON.stringify(profile));\r\n        setUser(profile);\r\n        notifyProfileUpdate();\r\n      },\r\n    }),\r\n    [user, token, loading]\r\n  );\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n  const ctx = useContext(AuthContext);\r\n  if (!ctx) throw new Error(\"useAuth must be used within AuthProvider\");\r\n  return ctx;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\publish\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\register\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\result\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\studio-static\\[...path]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\studio\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\tasks\\active\\remove\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\tasks\\active\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\uploads\\[...path]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\user\\[username]\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadProfile'. Either include it or remove the dependency array.","line":21,"column":6,"nodeType":"ArrayExpression","endLine":21,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [username, token, loadProfile]","fix":{"range":[621,638],"text":"[username, token, loadProfile]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadProfile'. Either include it or remove the dependency array.","line":28,"column":6,"nodeType":"ArrayExpression","endLine":28,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [username, token, loadProfile]","fix":{"range":[926,943],"text":"[username, token, loadProfile]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"ï»¿\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"../../providers\";\r\n\r\nexport default function UserProfilePage() {\r\n  const { username } = useParams();\r\n  const { token } = useAuth();\r\n  const router = useRouter();\r\n  const [profile, setProfile] = useState<any>(null);\r\n\r\n  const loadProfile = () => {\r\n    fetch(`/api/users/${username}/profile`, { headers: token ? { Authorization: `Bearer ${token}` } : {} })\r\n      .then((res) => res.json())\r\n      .then(setProfile);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProfile();\r\n  }, [username, token]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n    const handler = () => loadProfile();\r\n    window.addEventListener(\"profile-updated\", handler as EventListener);\r\n    return () => window.removeEventListener(\"profile-updated\", handler as EventListener);\r\n  }, [username, token]);\r\n\r\n  async function toggleFollow() {\r\n    if (!token) {\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n    if (profile?.is_following) {\r\n      await fetch(`/api/follow/${username}`, { method: \"DELETE\", headers: { Authorization: `Bearer ${token}` } });\r\n    } else {\r\n      await fetch(`/api/follow`, { method: \"POST\", headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` }, body: JSON.stringify({ username }) });\r\n    }\r\n    const data = await fetch(`/api/users/${username}/profile`, { headers: token ? { Authorization: `Bearer ${token}` } : {} }).then((r) => r.json());\r\n    setProfile(data);\r\n  }\r\n\r\n  if (!profile) return <div>\\u52a0\\u8f7d\\u4e2d...</div>;\r\n\r\n  return (\r\n    <div className=\"card p-6 space-y-3\">\r\n      <div className=\"text-xl font-semibold\">{profile.nickname || profile.username}</div>\r\n      <div className=\"text-sm text-zinc-500\">@{profile.username}</div>\r\n      <div className=\"text-sm text-zinc-400\">\\u5173\\u6ce8 {profile.following_count} \\u00b7 \\u7c89\\u4e1d {profile.follower_count}</div>\r\n      <button className=\"btn-primary w-32\" onClick={toggleFollow}>{profile.is_following ? \"\\u53d6\\u6d88\\u5173\\u6ce8\" : \"\\u5173\\u6ce8\"}</button>\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\videos\\delete\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\code\\witweb\\web\\src\\app\\videos\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]